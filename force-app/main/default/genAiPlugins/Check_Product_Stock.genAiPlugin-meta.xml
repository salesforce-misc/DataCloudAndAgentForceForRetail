<?xml version="1.0" encoding="UTF-8"?>
<GenAiPlugin xmlns="http://soap.sforce.com/2006/04/metadata">
    <canEscalate>false</canEscalate>
    <description>Handles Customer interest in a specific Product by first checking Product availability. In case the Product is out-of-stock, recommends alternatives and offers to notify the Customer when the Product is back in stock - ensuring a consistent experience for both guest and logged-in users.</description>
    <developerName>Check_Product_Stock</developerName>
    <genAiFunctions>
        <functionName>Check_Product_Availability</functionName>
    </genAiFunctions>
    <genAiFunctions>
        <functionName>Up_Sell_Products</functionName>
    </genAiFunctions>
    <genAiFunctions>
        <functionName>GuestORLoggedInUserCheck</functionName>
    </genAiFunctions>
    <genAiPluginInstructions>
        <description>If the customer express interest in a product (e.g.,says &quot;I’m also interested in [ProductName]&quot;) first call the action &apos;GuestORLoggedInUserCheck&apos; and pass the &apos;SessionId&apos; as Messaging Session Id coming from context variable messaging session.
 
If the response coming from &apos;GuestORLoggedInUserCheck&apos; as &apos;true&apos; then call the action &apos;Check_Product_Availability&apos; by extracting the product name from customer&apos;s query and pass it as input to ‘ProductName’ and Return the availability status from the ResponseMessage and again run the another action &apos;Up Sell Products&apos; to show some alternate products for upsell. Inform customer about availability status and ask, &quot;Would you like to be notified when the product is available?&quot; and if customer say &apos;Yes&apos; and response coming from &apos;GuestORLoggedInUserCheck&apos; as &apos;true&apos; then always say &quot;You will receive an email as soon as this product is stocked.&quot; (dont ask for email address and name).

If the response coming from &apos;GuestORLoggedInUserCheck&apos; as &apos;false&apos; then call the action &apos;Check_Product_Availability&apos; by extracting the product name from customer&apos;s query and pass it as input to ‘ProductName’ and return the availability status from the ResponseMessage and again run another action &apos;Up Sell Products&apos; to show some alternate products for upsell. Inform customer about availability status and ask, &quot;Would you like to be notified when the product is available?&quot; and if customer say &apos;Yes&apos; prompt customer to provide the email address and name. if customer provide email address (Make sure the email address provided is of proper format) then call another action &apos;Agentforce-Guest User Lead Creation&apos; and pass the email address and Name and the ask again &quot;You will receive an email as soon as this product is stocked. &quot;. Then proceed to ask &quot;would you also like to subscribe to our mailing list?&quot;. If customer interested in &apos;subscribe to our mailing list&apos; then call the action &apos;Call Journey API&apos;. The action will return a response with success or error. If Success is received inform the user that they will be receiving an email to subscribe.</description>
        <developerName>instruction_ifthecusto0</developerName>
        <language>en_US</language>
        <masterLabel>instruction_ifthecusto0</masterLabel>
    </genAiPluginInstructions>
    <language>en_US</language>
    <masterLabel>Check Product Stock</masterLabel>
    <pluginType>Topic</pluginType>
    <scope>Your job is to only handle Customer interest in a specific Product. This includes checking Product availability and recommending alternate upsell Product options when the specific Product is out-of-stock and additionally offer to notify the Customer when the Product is back in stock. You aren&apos;t supposed to request any additional information from the Customer.</scope>
</GenAiPlugin>
